# Applied Economics Project Template

The objective of this template is to provide a clean and organized environment from which to start up projects in applied economics. I have designed this template with the intention of using R within VS Code, though it can be easily adapted to other environments and languages.

For general advice on data science workflow and coding for economics, see the following pages:

- Brendan M. Price's [Resources for PhD Students](https://www.brendanmichaelprice.com/resources/grad/)
- Jenny Bryan's post on [project-oriented workflow](https://www.tidyverse.org/blog/2017/12/workflow-vs-script/) (with a useful explainer of the `here` package)
- [*Git: A Guide for Economists*](https://www.frankpinter.com/notes/git-for-economists-presentation.pdf) by Frank Pinter
- Arthur Turrell's [*Coding for Economists*](https://aeturrell.github.io/coding-for-economists/intro.html)
- [*Introduction to Econometrics with R*](https://www.econometrics-with-r.org/) by Hanck, Arnold, Gerber, and Schmelzer
- Development Impact's massive [list of technical postings](https://blogs.worldbank.org/en/impactevaluations/curated-list-our-postings-technical-topics-your-one-stop-shop-methodology-0)
- [An Introduction to Machine Learning with R](https://lgatto.github.io/IntroMachineLearningWithR/index.html) by Luarent Gatto.

## File Structure
Credit for the general structure of this project goes to [Brendan M. Price](https://www.brendanmichaelprice.com/workflow/).

The objective of this project organization is as follows:
- Each project should have its own directory (hence, this template). It should be as self-contained as possible.
- Files are separated by function.
- The entire project can be executed in one click from a `main` file. Subscripts handle discrete tasks.
- Easy to reproduce results, work across devices, share with collaborators, and submit to journals.


Note: the `.gitkeep` files are placeholders used to maintain the file structure within GitHub. Feel free to delete them once you have real files in their folders.

### Code
- `code/build` (data preparation)
- `code/check` (data validation)
- `code/learn` (exploratory analysis)
- `code/libraries` (external libraries used in code)
- `code/share` (public-facing analysis)

### Data
Included in .gitignore. Raw data is stored on the cloud elsewhere (ex: Dropbox, Onedrive) and copied into local directories as needed due to GitHub's file size restrictions. Derived data can be produced using the included code files.
- `data/raw` (data as it was acquired)
- `data/derived` (anything created in the project)

### Output
- `output/learn` (outputs of exploratory analysis)
- `output/share` (outputs of public-facing analysis)

### Paper
LaTeX files and pdfs.

### Renv
Generated by the [`renv`](https://rstudio.github.io/renv/index.html) package. Creates reproducible environments for R projects.

When a new user opens this project, renv will automatically bootstrap itself, downloading and installing the appropriate version. It will also ask the user if they want to download and install all project-necessary packages using `renv::restore()`.

#### Important Commands:

- `renv::init()` has already been run once to generate necessary folders and files for this project. Likely doesn't need to run again unless something goes wrong.
- `renv::snapshot()` updates the lockfile with metadata about the currently-used packages in the project library. Run this any time after you add or remove a `library()` call in the code.
- `renv::restore()` reproduces the current environment: uses the metadata from the lockfile to install exactly the same version of every package.
- `renv::install()` installs packages much like `install.packages()`, but can also install packages from GitHub, Bioconductor, and more.
- `renv::update()` gets the latest version of all dependencies.

### Other Files
- `.Rprofile` is used by the `renv` package.
- `.gitignore` tells git which files to exclude from tracking (for example, the `data` folder).
- `.lintr` sets rules for [lintr](https://lintr.r-lib.org/), which provides diagnostics for code in R. I have set this up to exclude many trivial warnings such as trailing blank lines.
- `LICENSE.txt` is an example license, adapted from the [replication package](https://www.openicpsr.org/openicpsr/project/136761/version/V1/view) for "Disability Insurance in the Great Recession: Ease of Access, Program Enrollment, and Local Hysteresis" by Kearney et al. It is also the license recommended by the [AEA](https://www.aeaweb.org/journals/data/faq#lic).
- `README.md` is this file.
- `renv.lock` is the lockfile used by the `renv` package (described above).

## Setting Up VS Code for R

If you are happy with your current tools and workflow, feel free to just use the file structure and resources described above to improve the organization of your projects. The instructions below are intended to help those interested in setting up a portable, reproducible R environment in VS Code from which you can edit code, generate outputs, and write documents in LaTeX all from within the same program. In the process, you will also set up Git and GitHub as a version control system.

### Step-by-step installation instructions
1. Install [VS Code](https://code.visualstudio.com/Download)

2. Install [R](https://cloud.r-project.org/) for your platform. To make the next step easier, I recommend adding a desktop shortcut during the installation process.

3. Install languageserver:

- Open the R terminal you just installed and run the following:

    `install.packages("languageserver", dependencies = TRUE)`

4. Open VS Code. In the **extensions** tab (Ctrl+Shift+X) search for and install the [REditorSupport](https://marketplace.visualstudio.com/items?itemName=REditorSupport.r) and [R Debugger](https://github.com/ManuelHentschel/VSCode-R-Debugger?tab=readme-ov-file) extensions.

5. Install [Git](https://git-scm.com/download). Make an account on [GitHub](https://github.com/) if you don't have one already.

6. **Use this template** to create a new GitHub Repository. There is a green button at the top right of this page which will do this for you.

7. Back in VS Code, click the **source control** button in the activity bar. Select "Clone a Repository", then "Clone from GitHub". You will need to authenticate your GitHub account and select a location on your machine where you will clone your new repo.

- If this is successful, you should now see the project in VS Code.
- See [this page](https://code.visualstudio.com/docs/sourcecontrol/overview) for more information on using Git in VS Code.
- Note: I recommend **not** cloning a Git repo into a synchronized folder like Dropbox or OneDrive, as this is known to [cause some issues](https://stackoverflow.com/questions/19305033/why-is-putting-git-repositories-inside-of-a-dropbox-folder-not-recommended).

8. Set up LaTeX in VS Code
- **Windows:** Download and install the [MiKTeX](https://miktex.org/) distribution to your machine.
- **Mac:** Download and install the [MacTeX](https://www.tug.org/mactex/mainpage2024.html) distribution.
- In the VS Code extensions tab, search for and install "LaTeX Workshop" and "LTeX - LanguageTool". VS Code will probably prompt you to reload your extensions - if not, close and reopen it yourself.
- Create a new `.tex` file in VS Code (probably in the `paper` subdirectory, which is already set up with a `.gitignore` file to handle LaTeX output). Add some basic LaTeX code:

```
\documentclass{article}
\begin{document}
Hello I am just a small document.
\end{document}
```
- Click the green "run" arrow in the top right of your `.tex` file. This should begin building the PDF. If MiKTeX prompts you to install the `latexmk` package, do so.
- Try to compile the PDF again. If it still fails, it is likely because you do not have Perl installed on your machine, which is a requirement for `latexmk`. See [the latexmk documentation](https://mg.readthedocs.io/latexmk.html) for information on how to fix this.
- Once your PDF compiles for the first time, you should be able to use the preview tool as well (the double-paned icon with the small magnifying glass).

9. Done! See the resources below for more information on this process and additional tools you may be interested in installing.

### Helpful Resources
- [VS Code's Documentation](https://code.visualstudio.com/docs/languages/r)
- Documentation for the [R Editor Extension](https://github.com/REditorSupport/vscode-R)
- Daniel LÃ¼decke's [articles](https://gist.github.com/strengejacke/82e8d7b869bd9f961d12b4091c145b88) for recommended extensions, keybindings, and other tips
- Jake Lee's [detailed guide](https://blog.jakelee.co.uk/getting-latex-working-in-vscode-on-windows/) to installing LaTeX with previews and autocomplete for VSCode
    - I followed this process as described, except I installed the [MiKTeX](https://miktex.org/) distribution instead of the TeX Live distribution. I found the installation process to be easier, and MiKTeX can do "on the fly" package installation.

## Why Use VS Code?
RStudio is also great (and it has an easier learning curve). I am switching my workflow to VS Code for the following reasons:

1. Excellent GitHub integration (see [here](https://vscode.github.com/))
2. Can easily switch between common research tasks and programming languages without changing environments. With the right extensions you can edit code, write in LaTeX, view PDFs, and browse excel/csv files, all without leaving VS Code. It also supports Python in case that is preferred for the task at hand.

<!---
Helpful note to self: (Ctrl+K V) opens a markdown preview side-by-side with the editor in VS Code.
-->
